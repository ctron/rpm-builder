<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/signing.md at 2023-01-11
 | Rendered using Apache Maven Fluido Skin 1.11.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Java RPM builder &#x2013; Signing</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.11.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.11.1.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>Java RPM builder</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-01-11<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.10.0</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="plugin-info.html" title="Goals"><span class="none"></span>Goals</a></li>
    <li><a href="usage.html" title="Usage"><span class="none"></span>Usage</a></li>
    <li><a href="example-primary.html" title="Example (primary artifact)"><span class="none"></span>Example (primary artifact)</a></li>
    <li><a href="example.html" title="Example (secondary artifact)"><span class="none"></span>Example (secondary artifact)</a></li>
   <li class="nav-header">Configuration</li>
    <li><a href="entry.html" title="Payload Entries"><span class="none"></span>Payload Entries</a></li>
    <li><a href="rulesets.html" title="Rulesets"><span class="none"></span>Rulesets</a></li>
    <li><a href="payload_information.html" title="Payload information"><span class="none"></span>Payload information</a></li>
    <li><a href="scripts.html" title="Scripts"><span class="none"></span>Scripts</a></li>
    <li><a href="deps.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li class="active"><a><span class="none"></span>Signing</a></li>
    <li><a href="naming.html" title="Naming"><span class="none"></span>Naming</a></li>
    <li><a href="lead.html" title="Lead information"><span class="none"></span>Lead information</a></li>
    <li><a href="verify.html" title="Verification flags"><span class="none"></span>Verification flags</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
    <div id="twitter" style="border:none; margin-top: 10px">
    <a href="https://twitter.com/ctron" class="twitter-follow-button" data-show-count="false" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow ctron</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Signing</h1>
<p>RPM packages can be signed using PGP header signature.</p><section>
<h2><a name="Configuration"></a>Configuration</h2>
<p>Signing is configured using the <code>&lt;signature&gt;</code> element:</p>

<div class="source"><pre class="prettyprint"><code>&lt;configuration&gt;
  &lt;signature&gt;
    &lt;keyId&gt;12345678&lt;/keyId&gt; &lt;!-- the ID of the key --&gt;
    &lt;keyringFile&gt;${user.home}/.gnupg/secring.gpg&lt;/keyringFile&gt; &lt;!-- path to the keyring file --&gt;
    &lt;passphrase&gt;secret&lt;/passphrase&gt; &lt;!-- passphrase to unlock the key --&gt;
    
    &lt;hashAlgorithm&gt;SHA1&lt;/hashAlgorithm&gt;  &lt;!-- optional : defaults to SHA1 --&gt;
    &lt;skip&gt;false&lt;/skip&gt; &lt;!-- optional : defaults to &quot;false&quot;, skip signature --&gt; 
  &lt;/signature&gt;
  
  &lt;skipSigning&gt;false&lt;/skipSigning&gt; &lt;!-- optional, defaults to &quot;false&quot; --&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>The keyring file is a standard GPG keyring file. The key ID is the short ID of the key to use for signing.</p>
<p>The hash algorithm can be either <code>SHA1</code>, <code>SHA256</code> or <code>SHA512</code>.</p>
<p>The <code>&lt;skip&gt;</code> element can be set to <code>true</code> in order to skip signing the package with this signature.</p></section><section>
<h2><a name="Hiding_credentials"></a>Hiding credentials</h2>
<p>The passphrase should not be store in any <code>pom.xml</code> which is possibly checked in to some sort of
source control system. It is possible to use properties and provide this information either from
the command line or the global Maven settings file <code>.m2/settings.xml</code>.</p>

<div class="source"><pre class="prettyprint"><code>&lt;signature&gt;
    &#x2026;
    &lt;phassphrase&gt;${my.passphrase}&lt;/passphrase&gt;
&lt;/signature&gt;
</code></pre></div>
<p>The following command will then provide the passphrase using the command line:</p>

<div class="source"><pre class="prettyprint"><code>mvn package -Dmy.passphrase=secret
</code></pre></div></section><section>
<h2><a name="Conditional_signing"></a>Conditional signing</h2>
<p>Sometime is may be useful to deactivate signing since the private key is not available. This may be case
when packages are signed in a central server which has the private key available, or a privileged user
who has access to the keyfile, but most other users don't.</p>
<p>This can be achieved using various different ways using the <code>&lt;skip&gt;</code> element of the <code>&lt;signature</code>&gt; element
or the global <code>&lt;skipSigning&gt;</code> element. Either in combination with Maven profiles or external properties.</p>
<p>By default if the <code>&lt;signature&gt;</code> element is present in the configuration, the information provided
has to be correct. So a missing/unset passphrase or key id will not disable the signing process, but cause
the build to fail.</p></section><section>
<h2><a name="Remarks"></a>Remarks</h2>
<p>There are a bunch of different ways to sign an RPM file, the RPM builder plugin currently
only supports PGP header signatures using SHA1 or SHA512.</p>
<p>Although RPM does support multiple signatures for one RPM file, the RPM builder can currently only
create one.</p></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2016&#x2013;2023
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
