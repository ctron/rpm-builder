<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2016-05-02 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160502" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Java RPM builder &#x2013; Scripts</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Java RPM builder</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-05-02
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.4.0
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="plugin-info.html" title="Goals">
          <span class="none"></span>
        Goals</a>
            </li>
                
      <li>
  
                          <a href="usage.html" title="Usage">
          <span class="none"></span>
        Usage</a>
            </li>
                
      <li>
  
                          <a href="example.html" title="Example">
          <span class="none"></span>
        Example</a>
            </li>
                              <li class="nav-header">Configuration</li>
                              
      <li>
  
                          <a href="entry.html" title="Payload Entries">
          <span class="none"></span>
        Payload Entries</a>
            </li>
                
      <li>
  
                          <a href="rulesets.html" title="Rulesets">
          <span class="none"></span>
        Rulesets</a>
            </li>
                
      <li>
  
                          <a href="payload_information.html" title="Payload information">
          <span class="none"></span>
        Payload information</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Scripts</a>
          </li>
                
      <li>
  
                          <a href="deps.html" title="Dependencies">
          <span class="none"></span>
        Dependencies</a>
            </li>
                
      <li>
  
                          <a href="signing.html" title="Signing">
          <span class="none"></span>
        Signing</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                    
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://ctron.github.io/rpm-builder" data-size="tall" ></div>

                   <div class="clear"></div>
                   
        
        
        
    <iframe src="https://www.facebook.com/plugins/like.php?href=https://ctron.github.io/rpm-builder&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/ctron" class="twitter-follow-button" data-show-count="false" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow ctron</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Scripts</h1>
<p>RPM allows to run scripts at various points.</p>
<p>Also see  * <a class="externalLink" href="https://fedoraproject.org/wiki/Packaging:Scriptlets">https://fedoraproject.org/wiki/Packaging:Scriptlets</a>  * <a class="externalLink" href="http://www.rpm.org/max-rpm/s1-rpm-specref-scripts.html#S2-RPM-SPECREF-INSTALL-ERASE-SCRIPTS">http://www.rpm.org/max-rpm/s1-rpm-specref-scripts.html#S2-RPM-SPECREF-INSTALL-ERASE-SCRIPTS</a> </p>
<div class="section">
<h2><a name="Script_types"></a>Script types</h2>
<p>The RPM builder current does support the following script types of RPM:</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Type </th>
      
<th>Tag </th>
      
<th>Spec Name </th>
      
<th>Description </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>Before Installation </td>
      
<td><tt>&lt;beforeInstallation&gt;</tt> </td>
      
<td><tt>%pre</tt> </td>
      
<td>Run before the installation of the package </td>
    </tr>
    
<tr class="a">
      
<td>After Installation </td>
      
<td><tt>&lt;afterInstallation&gt;</tt> </td>
      
<td><tt>%post</tt> </td>
      
<td>Run after the installation of the package </td>
    </tr>
    
<tr class="b">
      
<td>Before Removal </td>
      
<td><tt>&lt;beforeRemoval&gt;</tt> </td>
      
<td><tt>%preun</tt> </td>
      
<td>Run before the removal of the package </td>
    </tr>
    
<tr class="a">
      
<td>After Removal </td>
      
<td><tt>&lt;afterRemoval&gt;</tt> </td>
      
<td><tt>%postun</tt> </td>
      
<td>Run after the removal of the package </td>
    </tr>
  </tbody>
</table>
<p>Please note that RPM has a few things you might not expected from your scripts. For example is it possible to have multiple RPMs with the same package name, but different versions, installed. This will still call you &#x201c;After removal&#x201d; script, even when there is still one or more other versions of your package left. Please consult the RPM documentation for more information about scripts.</p>
<p>There are a few other script types and triggered. These are currently not supported by the RPM builder.</p>
<p>**Note: ** In the following examples <tt>&lt;script&gt;</tt> will be used to represent any script type. </p></div>
<div class="section">
<h2><a name="Basic_configuration"></a>Basic configuration</h2>
<p>Scripts are configured using the normal plugin configuration:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;configuration&gt;
  &#x2026;
    &lt;beforeInstallation&gt;&#x2026;&lt;/beforeInstallation&gt;
    &#x2026;
    &lt;defaultInterpreter&gt;&#x2026;&lt;/defaultInterpreter&gt; &lt;!-- optional --&gt;
  &#x2026;
&lt;/configuration&gt;
</pre></div></div>
<p>All scripts share the same configuration:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;script&gt;
   &lt;interpreter&gt;/bin/bash&lt;/interpreter&gt; &lt;!-- optional interpreter --&gt;

   &lt;!-- either one of the following --&gt;
   &lt;script&gt;echo &quot;foo bar&quot;&lt;/script&gt; &lt;!-- direct script content --&gt;
   &lt;file&gt;src/main/resources/someScript.sh&lt;/file&gt; &lt;!-- script content from file --&gt;
&lt;/script&gt;
</pre></div></div>
<p>It is also possible to use a quicker variant with inline script content:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;script&gt;
   echo &quot;foo bar&quot;
&lt;/script&gt;
</pre></div></div>
<p>Scripts can either be provided as plain text from inside the Maven configuration or can be read from a file. Specifying both elements (<tt>&lt;script&gt;</tt> and <tt>&lt;file&gt;</tt>) is unsupported.</p>
<p>The <tt>&lt;interpreter&gt;</tt> elements specifies the script interpreter to use. If it is left out, then the RPM builder will peek into the first line of the script in try to evaluate the script from the <tt>#!</tt> marker. (<tt>#!/bin/bash</tt> will result in <tt>/bin/bash</tt>).</p>
<p>If this fails, then the value of the <tt>&lt;defaultInterpreter&gt;</tt> element from the main configuration is used, which defaults to <tt>/bin/sh</tt>.</p></div>
<div class="section">
<h2><a name="Remarks"></a>Remarks</h2>
<p>The RPM builder currently does not support triggers or the <tt>pretrans</tt> script combination.</p>
<p>If using inline scripts, then the XML formatting might add a few extra whitespaces to your inline script content. Depending on the script language this may be problem. It is possible to use the <tt>&lt;![CDATA[&#x2026;]]&gt;</tt> element to work around this. Alternatively you can also use the external file mechanism. However due to the fact that the RPM builder does not know about the different script languages it does not trim, strip or clean up scripts in any way.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2016.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
